<!DOCTYPE html>
<html>
<head>
  <script src="./static/js/moment.min.js"></script>
 	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://unpkg.com/vue"></script>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
 	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
 	<link rel="stylesheet" href="./static/css/ca_style.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 	<script src="./static/js/helpers.js"> </script>
 	<script src="./static/js/jsonpath.js"></script>
</head>
<body>
  <div id='app' style='position:relative;'>
<header>
<div class="container color-scheme pad-left20">
  <div  class="pad-left10">
	<h1>LabWise</h1></div>
</div>
</header>
<!-- First Container -->
<div class="container">
  <div class="row patient-row">
  <div class="col-md-3 col-sm-3 col-xs-3"><h2><span id="patient-name"> </span> </h2></div>
  <div class="col-md-9 col-sm-9 col-xs-9">
  <div class="row patient-row">
      <div class="col-md-3"><h3><small>age:</small> <span id="patient-age"> </span></h3>  </div>
    <div class="col-md-3"> <h3><small>gender:</small><span id="patient-gender"> </span> </h3> </div>
    <div class="col-md-6"><h3><small>id:<span id="patient-id"> </span> </small></h3> </div>
</div>
<div class="row resource-row">
  <div class="col-md-3"><h3>Condition <span class="badge" id="condition_count">0</span> </h3> </div>
  <div class="col-md-3"><h3>Observation<span  class="badge" id="observation_count"> 0</span></h3>  </div>
  <div class="col-md-6"> <h3>Risk Assessment<span class="badge" id="risk_count"> 0 </span> </h3> </div>

</div>
</div></div></div>

<div class="container">
  <div class="row">
    <div class="col-md-4 pad-left0">

<div class="ht-full" id="input_div">
  <div class="border-box ht-full">
	  <div class=" box-header ">
			<h3> Patient Checklist </h3>
      <div class="row pad-top10">
        <div class="col-md-4 col-sm-8" style="line-height:2em;">
          <span> Autofill Sample</span>
        </div>
        <div class="col-md-8 col-sm-8">
          <div class="radio-group">
            <input type="radio" id="option-zero" value="0" name="patient" v-model='autofillSelection'>
            <label for="option-zero">0</label>
            <input type="radio" id="option-one" value="1" name="patient" v-model='autofillSelection'>
            <label for="option-one">1</label>
            <input type="radio" id="option-two"value="2"  name="patient" v-model='autofillSelection'>
            <label for="option-two">2</label>
            <input type="radio" id="option-three" value="3" name="patient" v-model='autofillSelection'>
            <label for="option-three">3</label>
            <input type="radio" id="option-four" value="4" name="patient" v-model='autofillSelection'>
            <label for="option-four">4</label>
          </div>
        </div>
  </div>
	  </div>
    <table id='inputtable' class="table-striped">
      <tbody>
        <tr v-for='entry in inputFormModel' :class='entry.key' >
          <td class="pad-left10 pad-right5" :class='entry.key'>
            <!-- <input type="checkbox" :id='entry.key' v-model="entry.value" @change=''> -->
            <div class="checkbox">
              <input v-model='entry.value' :id='entry.key' :name='entry.key'  type="checkbox" @change='getdata'>
              <label :for='entry.key' :class='entry.key'></label>
            </div>
          </td>
          <td class="pad-left10" :class='entry.key'>{{entry.prompt}}</td>
      </tr>
      </tbody>
    </table>

	</div>

</div>
</div>
<div class="col-md-8 clear-fix ht-full">
	<div class="row ht-full">
    <div class="col-md-12 col-sm-12 col-xs-12 visual-field text-center ht-full" v-if='isInit'>
      <div id="stent-div">
        <h3>Recommendations </h3>
      </div>
      <div class='initInstr'>To start the demo, select an autofill option (Option 0 will set the checklist to all unchecked) or change the checklist status. </div>
    </div>
    <div class="col-md-12 col-sm-12 col-xs-12 visual-field text-center ht-full" v-if='hasError'>
      <div id="stent-div">
        <h3>Recommendations </h3>
      </div>
      <div class='initInstr' v-if='error404' >One or more knowledge objects is/are missing in the activator. <br>Please check <a :href='baseurlkollink' target='_blank'>{{baseUrl}}/shelf</a>. <br>
        Try again after loading the needed knowledge objects. </div>
      <div class='initInstr' v-else>There is an error connecting to the activator. <br>Please check <a :href='baseurlhealthlink' target='_blank'>{{baseUrl}}/health</a>. <br>
          Try again after restarting the activator. </div>
    </div>
		<div class="col-md-12 col-sm-12 col-xs-12 visual-field text-center ht-full" v-if='!(isInit|hasError)'>
      <div id="stent-div">
				<h3>Recommendations </h3>
      </div>
      <div id="exTab2">
        <ul  class="nav nav-pills">
			    <li class="active">
            <a  href="#1b" data-toggle="tab">Recommendations</a>
			    </li>
			    <li><a href="#2b" data-toggle="tab">Knowledge Link</a>
			    </li>
          <li style='opacity:0.01;'><a href="#3b" data-toggle="tab">Activator </a>
			    </li>
		    </ul>

			<div class="tab-content clearfix">

        <div class="tab-pane active" id="1b">
          <div id="stent-gage">
            <ul id="reclist" style="list-style:none; width: 100%;overflow-y:auto;text-align:left;font-size: 18px;padding:0;margin:0;">
              <li v-for='(rec, index) in recommList' :class='rec.classkey' ><recomtile :recmodel='rec' :recindex='index'></recomtile></li>
            </ul>
          </div>
				</div>

				<div class="tab-pane" id="2b">
          <div class="col-md-12 text-center pad-top30">
            <h4>Knowledge Objects In Use</h4>
          </div>
          <div class="col-md-12 pad-top30">
           <a href="http://kgrid.med.umich.edu/library2/#/object/ark:%2F99999%2Ffk4g168s5p" class=knowledgeButton target="_blank">American Society for Clinical Pathology - Thyroid Testing</a>
          </div>
          <div class="col-md-12 pad-top30">
            <a href="http://kgrid.med.umich.edu/library2/#/object/ark:%2F99999%2Ffk4fj2rv22" class=knowledgeButton target="_blank">American Society of Hematology - Thrombophilia Testing</a>
          </div>
          <div class="col-md-12 pad-top30">
            <a href="http://kgrid.med.umich.edu/library2/#/object/ark:%2F99999%2Ffk4b85k02x" class=knowledgeButton target="_blank">American College of Rheumatology - ANA sub-serologies</a>
          </div>
				</div>

        <div class="tab-pane" id="3b">
          <div class="col-md-12 text-center pad-top30">
            <h4>Activator</h4>
          </div>
          <div class="col-md-12 pad-top30">
            <div class="radio-group">
              <input type="radio" id="local" :value="true" name="serverurl" v-model='localserver'>
              <label for="local">Localhost</label>
              <input type="radio" id="stack2" :value="false" name="serverurl" v-model='localserver'>
              <label for="stack2">KGrid Activator #2</label>
            </div>
          </div>
				</div>

			</div>
  </div>
		</div>
</div>
	</div>
</div>
</div>

<div class="container">
  <div class="row statussec">
    <button class="btn" type="button" data-toggle="collapse" data-target="#collapseStatus" aria-expanded="false" aria-controls="collapseStatus">
      APP LOG - LabWise
    </button>
    <div class="collapse in" id="collapseStatus">
      <div id='statuslog'>
        <ul id='eventlog' style='list-style:none;'><li v-for='entry in eventlog' :class='entry.key'>{{entry.timestamp}} <span>{{entry.text}}</span> </li></ul>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="container-fluid container-car color-scheme text-center">
  <p>University of Michigan Medical School 2017</p>
</footer>
</div>
<template id='recomtile-template'>
		<div v-bind:id="recindex">
				<div class="row kg-sub">
					<div class="col-md-11 col-sm-11 col-xs-11 kgl-title kg-fg-color ft-sz-12" data-toggle="tooltip"
							data-placement="top" v-bind:title="recmodel.status">{{recmodel.status}}
					</div>
				</div>
				<div class="row kg-rec">
					<div class="col-md-12 col-sm-12 col-xs-12 kg-rec ft-sz-16">{{recmodel.rec}}</div>
				</div>
        <div class="row kg-sub">
          <div class="col-md-7 col-sm-7 col-xs-7 kgl-title kg-fg-color ft-sz-12"></div>
          <div class="col-md-5 col-sm-5 col-xs-5 kgl-owner ft-sz-14"><a target="_blank" v-bind:href="recmodel.link"><span>{{recmodel.source}}</span></a></div>
        </div>

			</div>
	</template>
</body>
  <script src="./static/js/labwise.js"> </script>
</html>
